{"version":3,"sources":["CodeView.js","pages/Overview.js","api/index.js","pages/AppList.js","pages/AppDetail.js","index.js"],"names":["hljs","registerLanguage","javascript","CodeView","state","fileContent","componentDidMount","a","props","src","res","highlight","default","value","setState","render","className","dangerouslySetInnerHTML","__html","React","Component","Overview","to","prefix","test","window","location","host","getAppDetail","appName","Promise","resolve","axios","get","then","data","appDetail","map","item","icon","find","title","AppList","showCode","loading","apps","componentDidShow","lastProps","lastState","message","success","setTimeout","finally","componentWillHide","componentWillUnmount","goAppDetail","history","push","shape","type","style","margin","onClick","itemLayout","dataSource","renderItem","Item","Meta","avatar","marginLeft","size","description","marginRight","desc","$CacheRouteInjectPageElement","AppDetail","decodeURIComponent","search","slice","split","textAlign","allowHalf","rate","defaultValue","ReactDOM","path","exact","component","document","getElementById"],"mappings":"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","file":"static/js/main.70251155.chunk.js","sourcesContent":["import React from \"react\";\nimport hljs from \"highlight.js/lib/highlight\";\nimport javascript from \"highlight.js/lib/languages/javascript\";\nimport \"highlight.js/styles/monokai-sublime.css\";\n\nhljs.registerLanguage(\"javascript\", javascript);\n\nclass CodeView extends React.Component {\n  state = {\n    fileContent: \"\"\n  };\n\n  componentDidMount = async () => {\n    const res = await this.props.src();\n    const fileContent = hljs.highlight(\"javascript\", res.default).value;\n    this.setState({ fileContent });\n  };\n\n  render = () => {\n    const { fileContent } = this.state;\n    return (\n      <pre>\n        <code\n          className=\"hljs\"\n          dangerouslySetInnerHTML={{ __html: fileContent }}\n        />\n      </pre>\n    );\n  };\n}\n\nexport default CodeView;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport CodeView from \"../CodeView\";\n\nclass Overview extends React.Component {\n  render = () => {\n    return (\n      <>\n        <h1>1、路由代码</h1>\n        <CodeView src={() => import(\"!!raw-loader!../index.js\")} />\n\n        <h1>2、简述</h1>\n        <p>\n          在本demo中，应用列表（app-list）为CacheRoute；所以，该长列表内的应用数据，以及滚动条位置都会被缓存。\n        </p>\n        <p>\n          可以选择某个应用，进入该应用的详情（app-detail）；再返回到列表页，去体验这个效果！\n        </p>\n\n        <h3>\n          <Link to=\"/app-list\">点击前往应用列表页面</Link>\n        </h3>\n      </>\n    );\n  };\n}\n\nexport default Overview;\n","import axios from \"axios\";\n\nconst prefix = /github/.test(window.location.host)\n  ? \"/react-cache-router/build\"\n  : \"\";\n\nexport const getAppList = () =>\n  new Promise(resolve => {\n    axios\n      .get(`${prefix}/app-list.json`)\n      .then(res => {\n        return res.data;\n      })\n      .then(data => {\n        data = data.map(item => {\n          item.icon = `${prefix}/${item.icon}.svg`;\n          return item;\n        });\n        setTimeout(() => {\n          resolve(data);\n        }, 1000);\n      });\n  });\n\nexport const getAppDetail = appName =>\n  new Promise(resolve => {\n    axios\n      .get(`${prefix}/app-list.json`)\n      .then(res => {\n        return res.data;\n      })\n      .then(data => {\n        data = data.map(item => {\n          item.icon = `${prefix}/${item.icon}.svg`;\n          return item;\n        });\n        const appDetail = data.find(item => item.title === appName);\n        resolve(appDetail);\n      });\n  });\n","import React from \"react\";\nimport { List, Avatar, Button, message, Icon } from \"antd\";\nimport CodeView from \"../CodeView\";\nimport { getAppList } from \"../api\";\n\nclass AppList extends React.Component {\n  state = {\n    showCode: false,\n    loading: false,\n    apps: []\n  };\n\n  constructor(props) {\n    super(props);\n    props.$CacheRouteInjectPageElement(this);\n  }\n\n  componentDidShow = (lastProps, lastState) => {\n    message.success(\"自动恢复滚动条位置\");\n  };\n\n  componentDidMount = () => {\n    this.setState({ loading: true });\n    getAppList()\n      .then(apps => this.setState({ apps }))\n      .finally(() => {\n        this.setState({ loading: false });\n      });\n  };\n\n  componentWillHide = () => {\n    message.success(\"自动保存滚动条位置\");\n  };\n\n  componentWillUnmount = () => {\n    // componentWillUnmount将失效\n    // 业务逻辑需要移动到componentWillHide\n  };\n\n  goAppDetail = item => {\n    this.props.history.push(`/app-detail?title=${item.title}`);\n  };\n\n  render = () => {\n    const { apps, loading, showCode } = this.state;\n\n    return (\n      <>\n        <Button\n          shape=\"circle\"\n          type=\"primary\"\n          style={{ margin: 8 }}\n          onClick={() => this.setState({ showCode: !showCode })}\n        >\n          <Icon type=\"right-square\" />\n        </Button>\n        {showCode && <CodeView src={() => import(\"!!raw-loader!./AppList\")} />}\n        <List\n          itemLayout=\"horizontal\"\n          loading={loading}\n          dataSource={apps}\n          renderItem={item => (\n            <List.Item onClick={() => this.goAppDetail(item)}>\n              <List.Item.Meta\n                avatar={\n                  <Avatar\n                    style={{ marginLeft: 8 }}\n                    src={item.icon}\n                    size=\"large\"\n                  />\n                }\n                title={item.title}\n                description={<div style={{ marginRight: 8 }}>{item.desc}</div>}\n              />\n            </List.Item>\n          )}\n        />\n      </>\n    );\n  };\n}\n\nexport default AppList;\n","import React from \"react\";\nimport { Avatar, Rate, Button, Breadcrumb, Icon } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport CodeView from \"../CodeView\";\nimport { getAppDetail } from \"../api\";\n\nclass AppDetail extends React.Component {\n  state = {\n    showCode: false,\n    appDetail: {}\n  };\n\n  componentDidMount = () => {\n    const query = decodeURIComponent(this.props.location.search).slice(1);\n    const appName = query.split(\"=\")[1];\n    getAppDetail(appName).then(appDetail => this.setState({ appDetail }));\n  };\n\n  render = () => {\n    const { appDetail, showCode } = this.state;\n\n    return (\n      <>\n        <Button\n          shape=\"circle\"\n          type=\"primary\"\n          style={{ margin: 8 }}\n          onClick={() => this.setState({ showCode: !showCode })}\n        >\n          <Icon type=\"right-square\" />\n        </Button>\n\n        <Breadcrumb style={{ margin: 8 }}>\n          <Breadcrumb.Item>\n            <Link to=\"/app-list\">应用中心</Link>\n          </Breadcrumb.Item>\n          <Breadcrumb.Item>{appDetail.title}</Breadcrumb.Item>\n        </Breadcrumb>\n\n        {showCode && (\n          <CodeView src={() => import(\"!!raw-loader!./AppDetail\")} />\n        )}\n        <div style={{ textAlign: \"center\" }}>\n          <Avatar\n            style={{ margin: \"36px 0 12px 0\" }}\n            src={appDetail.icon}\n            size={80}\n          />\n          <h3>{appDetail.title}</h3>\n          <Rate allowHalf value={appDetail.rate} defaultValue={4.5} />\n          <h5 style={{ margin: \"12px 32px\" }}>{appDetail.desc}</h5>\n        </div>\n      </>\n    );\n  };\n}\n\nexport default AppDetail;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter, Route } from \"react-router-dom\";\nimport CacheRoute from \"cache-route\";\nimport Overview from \"./pages/Overview\";\nimport AppList from \"./pages/AppList\";\nimport AppDetail from \"./pages/AppDetail\";\nimport \"./style.css\";\n\nfunction App() {\n  return (\n    <HashRouter>\n      <Route path=\"/\" exact component={Overview} />\n      <CacheRoute path=\"/app-list\" component={AppList} />\n      <Route path=\"/app-detail\" component={AppDetail} />\n    </HashRouter>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}